{% extends "blog/base.html" %} {% block content %}

<section class="">
  <div class="container-lg">
    <div class="row">
      <div class="col-md-7 py-5 pe-2">
        {% if messages %} {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">{{ message }}</div>
        {% endfor %} {% endif %} {% comment %} {% endcomment %}
        <div class="d-flex flex-row mt-5">
          <img
            class="avatar me-3"
            src="{{ object.author.profile.image.url}}"
            alt="{{ object.author.username }}"
          />

          <div class="align-self-center">
            <h6 class="d-inline me-1">
              <a
                class="text-decoration-none text-dark"
                href="{% url 'user-posts' post.author.username %}"
                >{{ object.author }}</a
              >
            </h6>
            <h6 class="text-muted d-inline">
              {{ object.date_posted|date:"M d" }}
            </h6>
          </div>
        </div>

        <h2 class="mt-2 fs-4 fw-bolder">{{ object.title }}</h2>
        <p class="text-muted mb-0">{{ object.teaser }}</p>
        <p class="">{{ object.content }}</p>

        {% if object.author == user %}
        <div>
          <a
            class="btn btn-secondary btn-sm"
            href="{% url 'post-update' object.id %}"
            >Update</a
          >

          <a
            class="btn btn-danger btn-sm"
            href="{% url 'post-delete' object.id %}"
            >Delete</a
          >
        </div>
        {% endif %}

        <div class="mt-5">
          {% if not object.comments.all%}

          <h2 class="text-muted fs-5 ms-5">No Comments Yet</h2>

          {% else %}

          <h2 class="fs-5 fw-bolder pb-2">Comments ({{ num_comment }})</h2>

          {% for comment in object.comments.all %}

          <div class="d-flex flex-row mt-2">
            <img
              class="avatar me-3"
              src="{{ comment.author.profile.image.url}}"
              alt="{{ comment.author.username }}"
            />

            <div class="">
              <h6 class="">{{ comment.author.username }}</h6>
              <h6 class="text-muted">{{ comment.date_posted|date:"M d" }}</h6>
              <p>{{comment.body}}</p>
            </div>
          </div>

          {% endfor %} {% endif %}
        </div>

        <p>
          <a
            class="btn btn-dark ms-5 mt-2"
            href="{% url 'add-comment' object.id %}"
            >Add comment</a
          >
        </p>
      </div>
      <div class="col-md-5 py-4 ps-md-5 d-none d-md-block">
        <div class="sticky-md-top">
          <!-- 1 -->
          <div class="mt-4"></div>

          <!-- 2 -->
          <div class="mt-4"></div>
          <!-- 3 -->
          <div class="mt-4"></div>
          <!-- 4 -->

          <div class="mt-4"></div>
          <!-- 5 -->

          <div class="mt-4"></div>
        </div>
      </div>
    </div>
  </div>
</section>

{% endblock content %}
